const { Sequelize, DataTypes } = require('sequelize');
require('dotenv').config();

const sequelize = new Sequelize(process.env.DB_NAME, process.env.DB_USER, process.env.DB_PASSWORD, {
    host: process.env.DB_HOST,
    port: process.env.DB_PORT,
    dialect: 'postgres',
    logging: false
});

const Temple = sequelize.define('Temple', {
    name: { type: DataTypes.STRING, allowNull: false, unique: true },
    history: DataTypes.TEXT,
    architecture: DataTypes.TEXT,
    significance: DataTypes.TEXT,
    bestTimeToVisit: DataTypes.STRING,
    howToReach: DataTypes.TEXT,
    nearbyAttractions: DataTypes.TEXT
}, { timestamps: false });

const stories = [
    {
        name: "રણછોડરાયજી – ડાકોર",
        history: "ડાકોરનો ઇતિહાસ ભક્ત બોડાણા સાથે જોડાયેલો છે. બોડાણા દર વર્ષે દ્વારકા ચાલીને જતા હતા. તેમની વૃદ્ધાવસ્થામાં ભગવાન કૃષ્ણ તેમની ભક્તિથી પ્રસન્ન થઈને સ્વયં દ્વારકાથી ડાકોર આવ્યા હતા. આજે પણ એવું મનાય છે કે જે મૂર્તિ દ્વારકામાં હતી તે ડાકોર લાવવામાં આવી હતી.",
        architecture: "આ મંદિર ૧૭૭૨ માં ગોપાલરાવ જગન્નાથ તાંબેકર દ્વારા બંધાવવામાં આવ્યું હતું. તે મરાઠા યુગની સ્થાપત્ય શૈલી ધરાવે છે અને તેના પરિસરમાં સુંદર કોતરેલા સ્તંભો છે.",
        significance: "ભગવાન કૃષ્ણ અહીં 'રણછોડરાય' તરીકે પૂજાય છે. અહીં પૂનમનું ખાસ મહત્વ છે.",
        bestTimeToVisit: "શરદ પૂનમ અને હોળી (ફાગણી પૂનમ).",
        howToReach: "અમદાવાદ અને વડોદરાથી ટ્રેન કે બસ દ્વારા ૧.૫ કલાકમાં પહોંચી શકાય છે.",
        nearbyAttractions: "ગલતેશ્વર મહાદેવ અને વડતાલ સ્વામિનારાયણ મંદિર."
    },
    {
        name: "ખોડિયાર મંદિર - ભાવનગર રાજપરા",
        history: "આ સ્થાન આશરે ૨૦૦ થી વધુ વર્ષ જૂનું છે. ભાવનગરના જૂના રાજવી આતાભાઈ ગોહિલને માતાજીએ પ્રત્યક્ષ દર્શન આપીને અહીં બિરાજમાન થવાનું વચન આપ્યું હતું. 'તાંતણીયા ધરા' માંથી માતાજી પ્રગટ થયા હોવાની માન્યતા છે.",
        architecture: "પહાડો અને કુદરતી વાતાવરણની વચ્ચે બનેલું આ મંદિર તેની સાદગી અને આધ્યાત્મિકતા માટે જાણીતું છે.",
        significance: "ગોહિલવાડના કુળદેવી તરીકે પૂજાતા ખોડિયાર માતાજીના આ મંદિરે અનેક શ્રદ્ધાળુઓ પોતાની માનતા પૂરી કરવા આવે છે.",
        bestTimeToVisit: "વર્ષ દરમિયાન ગમે ત્યારે, વિશેષ કરીને નવરાત્રીમાં.",
        howToReach: "ભાવનગર શહેરથી આશરે ૧૫ કિ.મી. દૂર છે. રિક્ષા કે ટેક્સી સરળતાથી મળી રહે છે.",
        nearbyAttractions: "પાલિતાણા જૈન મંદિરો અને અલંગ શિપ બ્રેકિંગ યાર્ડ."
    },
    {
        name: "સિદ્ધિવિનાયક ગણપતિ – મુંબઈ",
        history: "૧૮૦૧ માં લક્ષ્મણ વિથુ અને દેઉબાઈ પાટીલ દ્વારા આ મંદિરનું નિર્માણ કરવામાં આવ્યું હતું. તે મુંબઈના સૌથી ધનિક અને પ્રખ્યાત મંદિરોમાંનું એક છે.",
        architecture: "મુંબઈના પ્રભાદેવી વિસ્તારમાં આવેલું આ મંદિર આધુનિક અને પરંપરાગત શૈલીનું મિશ્રણ છે. ગર્ભગૃહના દરવાજા પર સોનાનું મઢેલું કામ છે.",
        significance: "અહીં ગણેશજીની સૂંઢ જમણી બાજુ છે, જેને 'સિદ્ધિપીઠ' માનવામાં આવે છે. બોલીવુડ કલાકારોથી લઈને સામાન્ય માણસ સુધી સૌની અહીં શ્રદ્ધા છે.",
        bestTimeToVisit: "ગણેશ ચતુર્થી અને અંગારકી ચતુર્થી.",
        howToReach: "મુંબઈના દાદર રેલ્વે સ્ટેશનથી ખૂબ જ નજીક છે.",
        nearbyAttractions: "શ્રી મહાલક્ષ્મી મંદિર અને ગેટવે ઓફ ઇન્ડિયા."
    },
    {
        name: "શિરડી સાઈ બાબા મંદિર",
        history: "સાઈ બાબા ૧૯મી સદીમાં શિરડીમાં આવ્યા હતા અને તેમના અંતિમ શ્વાસ સુધી ત્યાં રહ્યા હતા. તેમણે 'સબકા માલિક એક' નો સંદેશ આપ્યો હતો અને શિરડીને એક પવિત્ર ધામ બનાવી દીધું.",
        architecture: "બાબાનું સમાધિ મંદિર પથ્થર અને આરસપહાણથી બનેલું છે. અહીં બાબાની બેઠેલી મુદ્રામાં સુંદર પ્રતિમા છે.",
        significance: "આ સ્થાન પર બાબાના અનેક ચમત્કારો સાક્ષી છે. અહીં અન્નદાનનું ખૂબ મહત્વ છે.",
        bestTimeToVisit: "ગુરુપૂર્ણિમા અને વિજયાદશમી.",
        howToReach: "શિરડીનું પોતાનું રેલ્વે સ્ટેશન અને એરપોર્ટ હવે તૈયાર છે.",
        nearbyAttractions: "શનિ શિંગણાપુર મંદિર અને અજંતા-ઈલોરાની ગુફાઓ."
    },
    {
        name: "મહાકાળેશ્વર મંદિર – ઉજ્જૈન",
        history: "ઉજ્જૈન ક્ષિપ્રા નદીના કિનારે આવેલું પ્રાચીન શહેર છે. ભગવાન શિવ અહીં કાલના પણ કાલ 'મહાકાલ' તરીકે બિરાજમાન છે.",
        architecture: "આ મંદિર ભૂમિજ શૈલી અને મરાઠા શૈલીનું મિશ્રણ છે. અહીં ત્રણ સ્તર છે - નીચે મહાકાળેશ્વર, વચ્ચે ઓમકારેશ્વર અને ઉપર નાગચંદ્રેશ્વર.",
        significance: "૧૨ જ્યોતિર્લિંગોમાંનું એક જે દક્ષિણ મુખી છે. અહીંની 'ભસ્મ આરતી' વિશ્વ પ્રસિદ્ધ છે.",
        bestTimeToVisit: "મહાશિવરાત્રી અને શ્રાવણ માસની સવારી.",
        howToReach: "ઇન્દોર એરપોર્ટથી ૬૦ કિ.મી. દૂર છે. ઉજ્જૈન રેલ્વે સ્ટેશન નજીક છે.",
        nearbyAttractions: "કાલ ભૈરવ મંદિર અને હરસિદ્ધિ માતા મંદિર."
    }
];

async function update() {
    try {
        await sequelize.authenticate();
        console.log('Connected.');
        for (const story of stories) {
            await Temple.update(story, { where: { name: story.name } });
            console.log(`Updated: ${story.name}`);
        }
    } catch (e) {
        console.error(e);
    } finally {
        await sequelize.close();
    }
}

update();
